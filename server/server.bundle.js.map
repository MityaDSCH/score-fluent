{"version":3,"sources":["webpack:///webpack/bootstrap de7d556fa64875095609","webpack:///./src/server/main.js","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///external \"compression\"","webpack:///external \"body-parser\"","webpack:///external \"morgan\"","webpack:///external \"mongoose\"","webpack:///external \"dotenv\"","webpack:///./src/server/routes.js","webpack:///external \"passport\"","webpack:///./src/server/routes/register.js","webpack:///./src/server/models/user.js","webpack:///external \"bcrypt\"","webpack:///./src/server/libs/tokenFromModel.js","webpack:///external \"jsonwebtoken\"","webpack:///./src/server/routes/authenticate.js","webpack:///./src/server/routes/timedScore.js","webpack:///external \"lodash\"","webpack:///./src/server/models/leaderboard.js","webpack:///./src/server/passport.js","webpack:///external \"passport-jwt\""],"names":[],"mappings":"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","file":"server.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap de7d556fa64875095609\n **/","// Import dependencies\nvar express = require('express');\nvar path = require('path');\nvar compression = require('compression');\nvar bodyParser = require('body-parser');\nvar morgan = require('morgan');\nvar mongoose = require('mongoose');\n\nif (process.env.NODE_ENV != 'production') {\n   require('dotenv').config();\n}\n\nvar port = process.env.PORT || 9000;\n\nvar app = express();\n\n// Constants\n// time in this format: https://github.com/rauchg/ms.js\napp.set('jwtSecret', process.env.JWT_SECRET);\napp.set('jwtDuration', '1 year');\n\n// connect to mongodb\nmongoose.connect(process.env.MONGODB_URI || 'mongodb://localhost:27017/score-fluent');\n\n// Parse json and url-encodec middleware\napp.use(compression());\napp.use(bodyParser.urlencoded({extended: true}));\napp.use(bodyParser.json());\n\n// Log requests middleware\napp.use(morgan('dev'));\n\n// Serve client\napp.use(express.static(path.join(__dirname, '../client')));\napp.get('/', express.static('./dist/client'));\napp.get('*', (req, res) => res.redirect('/'));\n\n// Serve api routes\nrequire('./routes.js')(app);\n\napp.listen(port);\nconsole.log(`listening on ${port}\\n`);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/main.js\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"compression\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"compression\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"body-parser\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"body-parser\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"morgan\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"morgan\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"mongoose\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mongoose\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"dotenv\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"dotenv\"\n ** module id = 7\n ** module chunks = 0\n **/","// Import dependencies\nvar passport = require('passport');\nvar express = require('express');\n\n// Load routes\nvar registerRoute = require('./routes/register');\nvar authenticateRoute = require('./routes/authenticate');\nvar timedScoreRoute = require('./routes/timedScore');\n\n// Load libs\nvar tokenFromModel = require('./libs/tokenFromModel');\n\n// Export Routes\nmodule.exports = function(app) {\n\n  // Init Passport middleware\n  app.use(passport.initialize());\n\n  // Use passport jwt Strategy\n  require('./passport')(passport);\n\n  var apiRoutes = express.Router();\n\n  // Enable cors\n  if (process.env.NODE_ENV !== 'production') {\n    apiRoutes.use(function(req, res, next) {\n      res.header('Access-Control-Allow-Origin', 'http://localhost:8080');\n      res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Authorization');\n      next();\n    });\n  }\n\n  // Register a new user\n  apiRoutes.post('/register', registerRoute(app));\n\n  // Authenticate a user\n  apiRoutes.post('/authenticate', authenticateRoute(app));\n\n  // Post a score\n  apiRoutes.post('/timed-score', passport.authenticate('jwt', {session: false}), timedScoreRoute(app));\n\n  app.use('/api', apiRoutes);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/routes.js\n **/","module.exports = require(\"passport\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport\"\n ** module id = 9\n ** module chunks = 0\n **/","var User = require('../models/user');\nvar tokenFromModel = require('../libs/tokenFromModel');\n\nmodule.exports = function(app) {\n  return function(req, res) {\n    if (!req.body.email || !req.body.password || !req.body.username) {\n      res.json({success: false, message: 'Fill out all required fields'});\n    } else {\n      var newUser = new User({\n        username: req.body.username,\n        email: req.body.email,\n        password: req.body.password\n      });\n      newUser.save(function(err) {\n        if (err) {\n          if (err.code == 11000) { // Catch mongoose duplicate errors\n            var errmsg = err.toJSON().errmsg;\n            var duplicate = errmsg.slice(errmsg.indexOf('$') + 1, errmsg.indexOf('_'));\n            return res.json({\n              success: false,\n              invalidFields: [\n                {field: duplicate, message: 'Duplicate ' + duplicate}\n              ]\n            });\n          } else if (err.name == 'ValidationError') { // Catch mongoose validation errors\n            var errors = Object.keys(err.errors);\n            errors = errors.map(function(errName) {\n              return {\n                field: errName,\n                message: err.errors[errName].message\n              };\n            });\n            console.log(err);\n            return res.json({\n              success: false,\n              invalidFields: errors\n            });\n          } else {\n            console.log(err);\n            return res.json({\n              success: false,\n              invalidFields: [\n                {field: null, message: 'Unknown error'}\n              ]\n            });\n          }\n        }\n        var token = tokenFromModel(newUser, ['_id', 'username', 'email', 'role'], app);\n        res.json({success: true, message: 'New user added', token: 'JWT ' + token});\n      });\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/routes/register.js\n **/","var mongoose = require('mongoose');\nvar bcrypt = require('bcrypt');\n\nvar UserSchema = new mongoose.Schema({\n  username: {\n    type: String,\n    lowercase: true,\n    unique: true,\n    required: true,\n    validate: {\n      validator: function(v) {\n        return /^[A-Za-z\\d$@$!%*?&]{3,}/.test(v);\n      },\n      message: 'Invalid Username'\n    }\n  },\n  email: {\n    type: String,\n    lowercase: true,\n    unique: true,\n    required: true,\n    validate: {\n      validator: function(v) {\n        return /[\\w._%+-]+@[\\w.-]+\\.[a-zA-Z]{2,4}/.test(v);\n      },\n      message: 'Invalid Email'\n    }\n  },\n  password: {\n    type: String,\n    required: true,\n    validate: {\n      validator: function(v) {\n        return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[A-Za-z\\d$@$!%*?&]{8,}/.test(v);\n      },\n      message: 'Invalid Password'\n    }\n  },\n  role: {\n    type: String,\n    enum: ['User', 'Admin'],\n    default: 'User'\n  }\n});\n\nUserSchema.pre('save', function(next) {\n  var user = this;\n  if (this.isModified('password') || this.isNew) {\n    bcrypt.genSalt(10, function(err, salt) {\n      if (err) {\n        return next(err);\n      }\n      bcrypt.hash(user.password, salt, function(err, hash) {\n        if (err) {\n          return next(err);\n        }\n        user.password = hash;\n        next();\n      });\n    });\n  } else {\n    return next();\n  }\n});\n\nUserSchema.methods.comparePassword = function(pw, cb) {\n  bcrypt.compare(pw, this.password, function(err, isMatch) {\n    if (err) {\n      return cb(err);\n    }\n    cb(null, isMatch);\n  });\n};\n\nmodule.exports = mongoose.model('User', UserSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/models/user.js\n **/","module.exports = require(\"bcrypt\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bcrypt\"\n ** module id = 12\n ** module chunks = 0\n **/","var jwt = require('jsonwebtoken');\n\nmodule.exports = function tokenFromModel(userModel, includedKeys, app) {\n  var user = {};\n  includedKeys.forEach(function(key) {\n    user[key] = userModel[key]\n  });\n  return jwt.sign(user, app.get('jwtSecret'), {\n    expiresIn: app.get('jwtDuration')\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/libs/tokenFromModel.js\n **/","module.exports = require(\"jsonwebtoken\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jsonwebtoken\"\n ** module id = 14\n ** module chunks = 0\n **/","var User = require('../models/user');\nvar tokenFromModel = require('../libs/tokenFromModel');\n\nmodule.exports = function(app) {\n  return function(req, res) {\n    User.findOne({\n      $or: [\n        {email: req.body.id},\n        {username: req.body.id}\n      ]\n    }, function(err, user) {\n      if (err) {\n        console.log(err);\n        throw err;\n      }\n      if (!user) {\n        res.send({\n          success: false,\n          invalidFields: [\n            {field: 'Username or Email', message: 'User not found'}\n          ]\n        });\n      } else {\n        user.comparePassword(req.body.password, function(err, isMatch) {\n          if (isMatch && !err) {\n            var token = tokenFromModel(user, ['_id', 'username', 'email', 'role'], app);\n            res.json({success: true, token: 'JWT ' + token});\n          } else {\n            res.send({\n              success: false,\n              invalidFields: [\n                {field: 'password', message: 'Password did not match'}\n              ]\n            });\n          }\n        });\n      }\n    });\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/routes/authenticate.js\n **/","var _ = require('lodash');\n\nvar Leaderboard = require('../models/leaderboard');\n\n// req has form {_id (for user), difficulty, clefs, score}\n\nmodule.exports = function(app) {\n  return function(req, res) {\n\n    var leaderboardBody = {\n      difficulty: req.body.difficulty,\n      clefs: typeof req.body.clefs === 'string' ? JSON.parse(req.body.clefs) : req.body.clefs\n    };\n\n    var newEntry = {\n      user: req.body._id,\n      score: req.body.score\n    };\n\n    // find/create relevant leaderboard and update/create entry\n    Leaderboard.findOne(leaderboardBody, function(err, leaderboard) {\n\n      if (leaderboard === null) {\n        leaderboard = new Leaderboard(leaderboardBody);\n      }\n\n      var curEntries = leaderboard.entries.toObject();\n\n      var curUserEntryIndex = _.findIndex(leaderboard.entries, function(entry) {\n        return String(entry.user) == newEntry.user\n      });\n\n      var highScore;\n      if (leaderboard.entries[curUserEntryIndex]) {\n        highScore = leaderboard.entries[curUserEntryIndex].score;\n      } else {\n        highScore = -Infinity;\n      }\n\n      if (curUserEntryIndex === -1) {\n        leaderboard.entries = binaryInsertEntry(leaderboard.entries, newEntry);\n      } else {\n        var curEntry = leaderboard.entries[curUserEntryIndex];\n        if (req.body.score > curEntry.score) {\n          leaderboard.entries.splice(curUserEntryIndex, 1);\n          leaderboard.entries = binaryInsertEntry(leaderboard.entries, newEntry);\n        }\n      }\n\n      leaderboard.save(function(err) {\n        if (err) res.json({success: false, err: err});\n        else {\n          //Find the top 5 scores and return to client in form {success, [{username, score}]}\n          Leaderboard\n            .findOne(leaderboardBody)\n            .slice('entries', 5)\n            .populate({\n              path: 'entries.user',\n              select: 'username'\n            })\n            .exec(function(err, leaderboard) {\n              if (err) res.json({success: false, err: err});\n              res.json({\n                success: true,\n                highScore: Math.max(highScore, newEntry.score),\n                topScores: leaderboard.entries.map(function(entry) {\n                  return {\n                    username: entry.user.username,\n                    score: entry.score\n                  };\n                })\n              });\n            });\n        }\n      });\n\n    });\n  }\n}\n\nfunction binaryInsertEntry(lbEntries, newEntry) {\n  // use binary search to find the proper index sort by increasing negative score\n  var binaryInsertIndex = _.sortedIndexBy(lbEntries, newEntry, function(entry) {\n    return -entry.score;\n  });\n\n  lbEntries.splice(binaryInsertIndex, 0, newEntry);\n\n  return lbEntries;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/routes/timedScore.js\n **/","module.exports = require(\"lodash\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"lodash\"\n ** module id = 17\n ** module chunks = 0\n **/","var mongoose = require('mongoose');\n\nvar LeaderboardEntrySchema = new mongoose.Schema({\n  user: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'User',\n    required: true\n  },\n  score: {\n    type: Number,\n    required: true\n  }\n});\n\nvar LeaderboardSchema = new mongoose.Schema({\n  difficulty: {\n    type: String,\n    required: true\n  },\n  clefs: {\n    type: Array,\n    required: true\n  },\n  entries: [LeaderboardEntrySchema]\n});\n\nmodule.exports = mongoose.model('Leaderboard', LeaderboardSchema);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/models/leaderboard.js\n **/","var JwtStrategy = require('passport-jwt').Strategy;\nvar ExtractJwt = require('passport-jwt').ExtractJwt;\nvar User = require('./models/user');\n\nmodule.exports = function(passport) {\n  var opts = {};\n  opts.jwtFromRequest = ExtractJwt.fromAuthHeader();\n  opts.secretOrKey = process.env.JWT_SECRET;\n  passport.use(new JwtStrategy(opts, function(jwt_payload, done) {\n    User.findOne({id: jwt_payload.id}, function(err, user) {\n      if (err) {\n        return done(err, false);\n      }\n      if (user) {\n        done(null, user);\n      } else {\n        done(null, false);\n      }\n    });\n  }));\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/passport.js\n **/","module.exports = require(\"passport-jwt\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"passport-jwt\"\n ** module id = 20\n ** module chunks = 0\n **/"],"sourceRoot":""}